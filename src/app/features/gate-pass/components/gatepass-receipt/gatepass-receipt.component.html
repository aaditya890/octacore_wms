<div class="min-h-screen bg-gray-50 px-6 py-10">
  <div
    class="max-w-4xl mx-auto bg-white border rounded-2xl shadow-md p-8 transition-all"
    *ngIf="!loading; else loadingTpl"
  >
    <div class="flex justify-between items-start mb-8">
  <div>
    <h1 class="text-2xl font-bold text-gray-800">Gate Pass Receipt</h1>
    <p class="text-gray-500 text-sm">Pass No: {{ data?.pass_number }}</p>
  </div>

  <div class="text-center">
    <img *ngIf="qrImage" [src]="qrImage" alt="QR Code"
      class="w-24 h-24 border rounded-lg shadow-sm mx-auto" />
    <p class="text-xs text-gray-500 mt-1">ğŸ“· Scan to Verify</p>
  </div>
</div>


    <!-- Receipt Details -->
    <div *ngIf="data; else notFound">
      <!-- Top Summary -->
      <div class="grid md:grid-cols-3 sm:grid-cols-2 gap-y-3 mb-6 text-gray-700">
        <p><b>Pass No:</b> {{ data.pass_number }}</p>
        <p><b>Type:</b> {{ data.pass_type | titlecase }}</p>
        <p>
          <b>Status:</b>
          <span
            class="px-2 py-0.5 rounded-full text-xs font-medium"
            [ngClass]="{
              'bg-green-100 text-green-700': data.status === 'approved',
              'bg-yellow-100 text-yellow-700': data.status === 'pending',
              'bg-red-100 text-red-700': data.status === 'rejected'
            }"
          >
            {{ data.status | titlecase }}
          </span>
        </p>
      </div>

      <!-- Party & Info Section -->
      <div class="border-t pt-5 grid sm:grid-cols-2 gap-y-2 mb-6 text-gray-700 text-sm">
        <p><b>Party Name:</b> {{ data.party_name }}</p>
        <p><b>Contact:</b> {{ data.party_contact || 'â€”' }}</p>
        <p><b>Vehicle:</b> {{ data.vehicle_number || 'â€”' }}</p>
        <p><b>Purpose:</b> {{ data.purpose }}</p>
        <p><b>Valid From:</b> {{ getFormattedDate(data.valid_from) }}</p>
        <p><b>Valid To:</b> {{ getFormattedDate(data.valid_to) }}</p>
      </div>

      <!-- Item Table -->
      <div *ngIf="data.items?.length" class="mt-8 border-t pt-4">
        <h2
          class="text-lg font-semibold mb-3 text-gray-800 flex items-center gap-2"
        >
          <span class="inline-block w-1.5 h-5 bg-gray-800 rounded"></span>
          Items in Gate Pass
        </h2>

        <div class="overflow-x-auto">
          <table
            class="min-w-full text-sm border rounded-xl overflow-hidden shadow-sm"
          >
            <thead class="bg-gray-100 text-gray-700">
              <tr>
                <th class="py-2 px-3 border text-center">#</th>
                <th class="py-2 px-3 border text-left">Item Name</th>
                <th class="py-2 px-3 border text-center">Quantity</th>
                <th class="py-2 px-3 border text-center">Unit</th>
                <th class="py-2 px-3 border text-left">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="let item of data.items; let i = index"
                class="border-b hover:bg-gray-50 transition-all"
              >
                <td class="py-2 px-3 text-center">{{ i + 1 }}</td>
                <td class="py-2 px-3">{{ item.item_name }}</td>
                <td class="py-2 px-3 text-center">{{ item.quantity }}</td>
                <td class="py-2 px-3 text-center">{{ item.unit }}</td>
                <td class="py-2 px-3">{{ item.description || 'â€”' }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Footer Info -->
      <div class="mt-6 border-t pt-4 text-sm text-gray-600">
        <p><b>Created At:</b> {{ getFormattedDate(data.created_at) }}</p>
        <p><b>Notes:</b> {{ data.notes || 'â€”' }}</p>
      </div>
    </div>

    <!-- Not Found -->
    <ng-template #notFound>
      <div
        class="text-center py-12 border border-dashed border-gray-300 rounded-xl"
      >
        <p class="text-red-500 text-base font-medium">
          âŒ No details found for this gate pass.
        </p>
      </div>
    </ng-template>
  </div>

  <!-- Loading Template -->
  <ng-template #loadingTpl>
    <div class="text-center py-24 text-gray-500">
      <mat-spinner diameter="40"></mat-spinner>
      <p class="mt-3">Loading gate pass details...</p>
    </div>
  </ng-template>
</div>
