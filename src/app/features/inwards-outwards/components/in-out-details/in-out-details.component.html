<div
  class="bg-white p-6 shadow-xl max-w-lg relative overflow-hidden"
  [ngClass]="{ 'border-l-8 border-yellow-400': data.is_repairing }"
>
  <div class="flex justify-between items-center border-b pb-3 mb-4">
    <h2
      class="text-xl font-bold text-gray-900 flex items-center gap-2"
      [ngClass]="{ 'text-yellow-700': data.is_repairing }"
    >
      <span *ngIf="data.is_repairing">ğŸ› ï¸ Repairing Item</span>
      <span *ngIf="!data.is_repairing">ğŸ§¾ Transaction Details</span>
    </h2>
    <button
      class="text-gray-400 hover:text-gray-600 text-lg"
      (click)="dialogRef.close()"
    >
      âœ•
    </button>
  </div>

  <div class="space-y-3 text-sm text-gray-700">
    <div class="flex justify-between">
      <span class="font-semibold">Type</span>
      <span
        [ngClass]="{
          'text-green-700 bg-green-50': data.transaction_type === 'inward',
          'text-red-700 bg-red-50': data.transaction_type === 'outward'
        }"
        class="px-2 py-1 rounded-md text-xs font-semibold border"
      >
        {{ data.transaction_type | titlecase }}
      </span>
    </div>

    <p>
      <strong>Item:</strong>
      {{ data.item_name || data.item_display_name }}
    </p>
    <p><strong>Quantity:</strong> {{ data.quantity }} {{ data.unit }}</p>
    <p><strong>Rate per Unit:</strong> â‚¹{{ data.unit_price }}</p>
    <p><strong>Total Amount:</strong> â‚¹{{ data.total_amount }}</p>
    <p><strong>Party:</strong> {{ data.party_name }}</p>
    <p><strong>Invoice/Ref:</strong> {{ data.invoice_number }}</p>

    <div *ngIf="data.is_repairing" class="pt-3 border-t border-yellow-300">
      <div
        class="bg-yellow-50 border border-yellow-200 rounded-md p-3 text-yellow-900 text-sm"
      >
        <p class="font-semibold">ğŸ”§ Repairing Item</p>
        <p *ngIf="data.expected_return_date" class="mt-1">
          <strong>Expected Return:</strong>
          {{ data.expected_return_date | date: 'dd MMM yyyy' }}
        </p>
        <p *ngIf="!data.expected_return_date" class="mt-1 italic text-xs">
          No expected return date mentioned.
        </p>
      </div>
    </div>

    <div *ngIf="data.notes" class="pt-3 border-t">
      <p><strong>Remarks:</strong></p>
      <p
        class="bg-gray-50 text-gray-700 rounded-md p-2 text-sm whitespace-pre-line"
      >
        {{ data.notes }}
      </p>
    </div>

    <div class="pt-2 border-t text-gray-500 text-xs">
      <p>
        <strong>Date & Time:</strong>
        {{ data.created_at | date: 'dd MMM yyyy, hh:mm a' }}
      </p>
    </div>
  </div>

  <div class="mt-5 text-right">
    <button
      class="bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition-all"
      (click)="dialogRef.close()"
    >
      Close
    </button>
  </div>
</div>
